{"version":3,"sources":["app.js","config.js","all.js","models.js","ng-table-factory.js","services.js","annotations.js","admin.js","crud.js","config-service.js","all-controller.js","category-service.js","ng-table-factory-service.js","api-service.js"],"names":["angular","module","run","window","wg","assert","cond","msg","console","value","templateUrl","minDuration","config","controller","AppController","$scope","$state","wgModelsCategory","wgServicesApi","ctrl","crudModel","transitionTo","authorize","login","then","session","$digest","global","component","createComponent","service","createService","moduleName","directiveName","options","opts","prefixedDirectiveName","_","upperFirst","controllerAsName","defaultDirectiveParams","restrict","scope","bindToController","controllerAs","assignIn","directive","serviceName","prefixedServiceName","factory","$stateProvider","state","abstract","url","SUPPORTED_LANGUAGES","split","wgNgTableFactory","ngTableCrud","undefined","ngTableCols","$watch","val","updateCrudTable","model","dynamicCrud","dynamicCrudCols","schema","name","type","required","unique","index","maxlength","NgTableParams","tableParams","page","count","sorting","tableSettings","filterDelay","getData","pagination","params","paramSorting","first","toPairs","isEmpty","sortBy","asc","filters","transform","filter","result","key","isNil","isString","valueToFilter","crud","retrieveAll","total","resp","data","content","schemaCols","map","col","show","field","title","sortable","fromPairs","IdCol","concat","wgConfig","jwtToken","user","isAuthorized","getUser","getToken","create","crudCreate","retrieve","crudRetrieve","crudRetrieveAll","update","crudUpdate","delete","crudDelete","email","password","$","ajax","APP_URL","method","JSON","stringify","contentType","dataType","jwt_decode","urlParams","param","headers"],"mappings":"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","file":"wiregoose.js","sourcesContent":["(function () {\n\n'use strict';\n\nangular.module('wg.app', [\n  'ngAnimate',\n  'toastr',\n  'ngSanitize',\n  'ngTable',\n  'cgBusy',\n  'ui.router',\n  'wg.app.components.config',\n  'wg.app.components.ngTableFactory',\n  'wg.app.components.crud.all',\n  'wg.app.components.models',\n  'wg.app.components.services',\n  'wg.app.sections.admin',\n  'wg.app.sections.admin.crud' \n])\n\n.run(() => (window.wg = window.wg || {}).assert = (cond, msg) => console.assert(cond, msg))\n\n.value('cgBusyDefaults', {\n  templateUrl: 'components/theming/cg-busy-template.html',\n  minDuration: 200\n})\n\n.config($urlRouterProvider => {\n  // $urlRouterProvider.otherwise('/mixedItems');\n})\n\n.controller('AppController', AppController);\n\nfunction AppController($scope, $state, wgModelsCategory, wgServicesApi) {\n  const ctrl = this;\n  ctrl.crudModel = wgModelsCategory;\n\n  $state.transitionTo('admin.crudAll');\n\n  wgServicesApi.authorize.login('john.apostolidi@gmail.com', '123456789')\n    .then((session) => {\n      ctrl.session = session;\n      $scope.$digest();\n    })\n}\n\n})();","(function () {\n\n'use strict';\n\nangular.module('wg.app.components.config', []);\n\n})();","(function () {\n\n'use strict';\n\nangular.module('wg.app.components.crud.all', []);\n\n})();","(function () {\n\n'use strict';\n\nangular.module('wg.app.components.models', []);\n\n})();","(function () {\n\n'use strict';\n\nangular.module('wg.app.components.ngTableFactory', []);\n\n})();","(function () {\n\n'use strict';\n\nangular.module('wg.app.components.services', []);\n\n})();","(function (global) {\n\n'use strict';\n\nglobal.wg = global.wg || {}; \n\nglobal.wg.component = createComponent;\nglobal.wg.service = createService;\n\nfunction createComponent(moduleName, directiveName, options, controller) {\n  const ctrl = controller || options;\n  const opts = controller ? options : {};\n\n  const prefixedDirectiveName = 'wg' + _.upperFirst(directiveName);\n  const controllerAsName = directiveName + 'Ctrl';\n  const defaultDirectiveParams = {\n    controller: ctrl,\n    restrict: 'E',\n    scope: {},\n    bindToController: true,\n    controllerAs: controllerAsName\n  };\n\n  _.assignIn(defaultDirectiveParams, opts);\n\n  angular.module(moduleName)\n    .directive(prefixedDirectiveName, () => defaultDirectiveParams);\n}\n\nfunction createService(moduleName, serviceName, controller) {\n  const prefixedServiceName = 'wg' + _.upperFirst(serviceName);\n\n  angular.module(moduleName)\n    .factory(prefixedServiceName, controller);    \n}\n\n})(window);","angular.module('wg.app.sections.admin', [])\n\n.config(function ($stateProvider) {\n  $stateProvider.state('admin', {\n    abstract: true,\n    url: '/admin',\n    templateUrl: 'sections/admin/admin.html'\n  });\n});","angular.module('wg.app.sections.admin.crud', [])\n\n.config(function ($stateProvider) {\n  $stateProvider.state('admin.crudAll', {\n    url: '/admin/crudAll',\n    templateUrl: 'sections/admin/crud/crud-all.html'\n  });\n});","(function () {\n\n'use strict';\n\nwg.service('wg.app.components.config', 'config', () => {\n\nwg.config.SUPPORTED_LANGUAGES = wg.config.SUPPORTED_LANGUAGES.split(',')\n\nreturn wg.config;\n\n});\n\n})();","(function () {\n\n'use strict';\n\nwg.component('wg.app.components.crud.all', 'crudAll', {\n  templateUrl: 'components/crud/all/all.html',\n  scope: {\n    crudModel: '='\n  }\n}, function($scope, wgServicesApi, wgNgTableFactory) {\n\nconst ctrl = this;\n\nctrl.ngTableCrud = undefined;\nctrl.ngTableCols = undefined;\n\n$scope.$watch(\n  () => this.crudModel,\n  (val) => val && updateCrudTable(val)\n);\n\nfunction updateCrudTable(model) {\n  ctrl.ngTableCrud = wgNgTableFactory.dynamicCrud(model);  \n  ctrl.ngTableCols = wgNgTableFactory.dynamicCrudCols(model);\n}\n\n})})();","(function () {\n\n'use strict';\n\nwg.service('wg.app.components.models', 'modelsCategory', () => {\n\n return {\n    schema: {\n      name: {type: 'String', required: true, unique: true, index: true, maxlength: [64]}\n    },\n    name: 'category'\n  };\n\n});\n\n})();","(function () {\n\n'use strict';\n\nwg.service('wg.app.components.ngTableFactory', 'ngTableFactory', (NgTableParams, wgServicesApi) => {\n\n  return {\n    dynamicCrud,\n    dynamicCrudCols\n  };\n\n  function dynamicCrud(model) {\n    const tableParams = {\n      page: 1, // show first page\n      count: 10, // count per page\n      sorting: {}\n    };\n\n    const tableSettings = {\n      filterDelay: 300,\n      getData: params => {\n        const opts = {};\n\n        opts.pagination = {\n          count: params.count(),\n          page: params.page()\n        };\n\n        const paramSorting = _.first(_.toPairs(params.sorting()));\n        if (!_.isEmpty(paramSorting)) {\n          opts.pagination.sortBy = paramSorting[0];\n          opts.pagination.asc = paramSorting[1] === 'asc' ? 'true' : 'false';\n        }\n\n        const filters = _.transform(params.filter(), (result, value, key) => {\n          if (!(_.isNil(value) || (_.isString(value) && !value))) {\n            result[key] = valueToFilter(value);\n          }\n        }, {});\n\n        if (!_.isEmpty(filters)) {\n          opts.filters = filters;\n        }\n\n        return wgServicesApi.crud.retrieveAll(model, opts)\n          .then(resp => {\n            params.total(resp.data.total);\n            return resp.data.content;\n          });\n      }\n    };\n    return new NgTableParams(tableParams, tableSettings);\n  }\n\n  function dynamicCrudCols(model) {\n    const schemaCols = _.map(model.schema, (opts, name) => {\n      const col = {\n        show: true,\n        field: name,\n        title: name\n      };\n      if (opts.type === 'String') {\n        col.sortable = name;\n        col.filter = _.fromPairs([[name, 'text']]);\n      } else {\n        wg.assert(false, `unsupported content type: ${opts.type}`);\n      }\n      return col;\n    });\n\n    const IdCol = {\n      show: true,\n      field: '_id',\n      title: 'id',\n      sortable: '_id'\n    };\n\n    return [].concat(IdCol)\n            .concat(schemaCols)\n  }\n\n  function valueToFilter(value) {\n    return value;\n  }\n\n})\n\n\n})();","(function () {\n\n'use strict';\n\nwg.service('wg.app.components.services', 'servicesApi', (wgConfig) => {\n\nlet jwtToken;\nlet user;\n\nreturn {\n  authorize: {\n    isAuthorized,\n    getUser,\n    getToken,\n    login\n  },\n  crud: {\n    create: crudCreate,\n    retrieve: crudRetrieve,\n    retrieveAll: crudRetrieveAll,\n    update: crudUpdate,\n    delete: crudDelete\n  }\n};\n\nfunction isAuthorized() {\n  return !!jwtToken;\n}\n\nfunction getUser() {\n  return user;\n}\n\nfunction getToken() {\n  return jwtToken;\n}\n\n      // headers: {\n      //   'Authorization': 'token'\n      // },\nfunction login(email, password) {\n  return $.ajax({\n    url: `${wgConfig.APP_URL}/authorize/login`,\n    method: 'POST',\n    data: JSON.stringify({email, password}),\n    contentType: 'application/json',\n    dataType: 'json'\n  })\n  .then(session => {\n    jwtToken = session.data;\n    const data = jwt_decode(jwtToken);\n    user = data.user;\n    return user;\n  });\n}\n\nfunction crudCreate() {\n\n}\n\nfunction crudRetrieve() {\n\n}\n\nfunction crudRetrieveAll(model, opts) {\n  const params = {};\n  _.assignIn(params, opts.pagination, opts.filters);\n  const urlParams = $.param(params);\n\n  return $.ajax({\n    url: `${wgConfig.APP_URL}/${model.name}?${urlParams}`,\n    method: 'GET',    \n    headers: {\n      'Authorization': jwtToken\n    },\n    contentType: 'application/json',\n    dataType: 'json'    \n  });\n}\n\nfunction crudUpdate() {\n\n}\n\nfunction crudDelete() {\n\n}\n\n\n});\n\n})();"]}